"use strict";var P=Object.create;var c=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var C=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),R=(e,t)=>{for(var o in t)c(e,o,{get:t[o],enumerable:!0})},m=(e,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of M(t))!b.call(e,n)&&n!==o&&c(e,n,{get:()=>t[n],enumerable:!(s=x(t,n))||s.enumerable});return e};var k=(e,t,o)=>(o=e!=null?P(O(e)):{},m(t||!e||!e.__esModule?c(o,"default",{value:e,enumerable:!0}):o,e)),q=e=>m(c({},"__esModule",{value:!0}),e);var w=C((N,p)=>{"use strict";var H=require("os"),f=H.homedir();p.exports=e=>{if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);return f?e.replace(/^~(?=$|\/|\\)/,f):e}});var K={};R(K,{default:()=>F});module.exports=q(K);var i=require("@raycast/api");var d=require("@raycast/api"),r=require("fs"),T=require("path"),g=k(w()),G=require("react/jsx-runtime"),a=(0,d.getPreferenceValues)(),u=(0,g.default)(a.downloadsFolder??"~/Downloads"),S=a.showHiddenFiles,_=a.fileOrder,l=a.lastestDownloadOrder;function E(){return(0,r.readdirSync)(u).filter(t=>S||!t.startsWith(".")).map(t=>{let o=(0,T.join)(u,t),s=(0,r.statSync)(o);return{file:t,path:o,lastModifiedAt:s.mtime,createdAt:s.ctime,addedAt:s.atime,birthAt:s.birthtime}}).sort((t,o)=>{switch(_){case"addTime":return o.addedAt.getTime()-t.addedAt.getTime();case"createTime":return o.createdAt.getTime()-t.createdAt.getTime();case"modifiedTime":default:return o.lastModifiedAt.getTime()-t.lastModifiedAt.getTime()}})}function A(){let e=E();if(!(e.length<1))return l==="addTime"?e.sort((t,o)=>o.addedAt.getTime()-t.addedAt.getTime()):l==="createTime"?e.sort((t,o)=>o.createdAt.getTime()-t.createdAt.getTime()):l==="modifiedTime"?e.sort((t,o)=>o.lastModifiedAt.getTime()-t.lastModifiedAt.getTime()):l==="birthTime"&&e.sort((t,o)=>o.birthAt.getTime()-t.birthAt.getTime()),e[0]}function h(){try{return(0,r.accessSync)(a.downloadsFolder,r.constants.R_OK),!0}catch(e){return console.error(e),!1}}var y=require("@raycast/api"),D=require("@raycast/api");async function F(){if(!h()){await(0,i.showHUD)("No permission to access the downloads folder");return}let e=A();if(!e){await(0,i.showHUD)("No downloads found");return}await y.Clipboard.copy({file:e.path}),await(0,D.closeMainWindow)(),await(0,i.showHUD)("Copied latest download to clipboard"),await(0,i.popToRoot)()}

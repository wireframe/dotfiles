"use strict";var k=Object.create;var m=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var O=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),M=(e,t)=>{for(var i in t)m(e,i,{get:t[i],enumerable:!0})},h=(e,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of S(t))!L.call(e,a)&&a!==i&&m(e,a,{get:()=>t[a],enumerable:!(o=F(t,a))||o.enumerable});return e};var C=(e,t,i)=>(i=e!=null?k(x(e)):{},h(t||!e||!e.__esModule?m(i,"default",{value:e,enumerable:!0}):i,e)),b=e=>h(m({},"__esModule",{value:!0}),e);var T=O((K,A)=>{"use strict";var _=require("os"),u=_.homedir();A.exports=e=>{if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);return u?e.replace(/^~(?=$|\/|\\)/,u):e}});var G={};M(G,{default:()=>$});module.exports=b(G);var r=require("@raycast/api"),D=require("react");var c=require("@raycast/api"),n=require("fs"),g=require("path"),y=C(T()),l=require("react/jsx-runtime"),d=(0,c.getPreferenceValues)(),f=(0,y.default)(d.downloadsFolder??"~/Downloads"),q=d.showHiddenFiles,I=d.fileOrder,V=d.lastestDownloadOrder;function w(){return(0,n.readdirSync)(f).filter(t=>q||!t.startsWith(".")).map(t=>{let i=(0,g.join)(f,t),o=(0,n.statSync)(i);return{file:t,path:i,lastModifiedAt:o.mtime,createdAt:o.ctime,addedAt:o.atime,birthAt:o.birthtime}}).sort((t,i)=>{switch(I){case"addTime":return i.addedAt.getTime()-t.addedAt.getTime();case"createTime":return i.createdAt.getTime()-t.createdAt.getTime();case"modifiedTime":default:return i.lastModifiedAt.getTime()-t.lastModifiedAt.getTime()}})}function E(){try{return(0,n.accessSync)(d.downloadsFolder,n.constants.R_OK),!0}catch(e){return console.error(e),!1}}var P=e=>t=>E()?((0,n.accessSync)(d.downloadsFolder,n.constants.R_OK),(0,l.jsx)(e,{...t})):(0,l.jsx)(c.Detail,{markdown:`## Permission Required

The Downloads Manager extension requires access to your Downloads folder. Please grant permission to use it.

![Grant Permission](permission.png)`,actions:(0,l.jsx)(c.ActionPanel,{children:(0,l.jsx)(c.Action.Open,{title:"Grant Permission",target:"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles"})})});var s=require("react/jsx-runtime");function R(){let[e,t]=(0,D.useState)(w());function i(o){t(a=>a.filter(p=>Array.isArray(o)?!o.includes(p.path):o!==p.path))}return(0,s.jsxs)(r.List,{children:[e.length===0&&(0,s.jsx)(r.List.EmptyView,{icon:{fileIcon:f},title:"No downloads found",description:"Well, first download some files \xAF\\_(\u30C4)_/\xAF"}),e.map(o=>(0,s.jsx)(r.List.Item,{title:o.file,icon:{fileIcon:o.path},quickLook:{path:o.path,name:o.file},accessories:[{date:o.lastModifiedAt,tooltip:`Last modified: ${o.lastModifiedAt.toLocaleString()}`}],actions:(0,s.jsxs)(r.ActionPanel,{children:[(0,s.jsxs)(r.ActionPanel.Section,{children:[(0,s.jsx)(r.Action.Open,{title:"Open File",target:o.path}),(0,s.jsx)(r.Action.ShowInFinder,{path:o.path}),(0,s.jsx)(r.Action.CopyToClipboard,{title:"Copy File",content:{file:o.path},shortcut:{modifiers:["cmd","shift"],key:"c"}})]}),(0,s.jsxs)(r.ActionPanel.Section,{children:[(0,s.jsx)(r.Action.OpenWith,{path:o.path,shortcut:{modifiers:["cmd"],key:"o"}}),(0,s.jsx)(r.Action.ToggleQuickLook,{shortcut:{modifiers:["cmd"],key:"y"}})]}),(0,s.jsxs)(r.ActionPanel.Section,{children:[(0,s.jsx)(r.Action.Trash,{title:"Delete Download",paths:o.path,shortcut:{modifiers:["ctrl"],key:"x"},onTrash:i}),(0,s.jsx)(r.Action.Trash,{title:"Delete All Downloads",paths:e.map(a=>a.path),shortcut:{modifiers:["ctrl","shift"],key:"x"},onTrash:i})]})]})},o.path))]})}var $=P(R);

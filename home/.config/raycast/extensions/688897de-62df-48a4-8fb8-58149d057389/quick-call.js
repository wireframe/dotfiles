"use strict";var G=Object.create;var p=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var K=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty;var m=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Y=(e,r)=>{for(var t in r)p(e,t,{get:r[t],enumerable:!0})},C=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of j(r))!R.call(e,n)&&n!==t&&p(e,n,{get:()=>r[n],enumerable:!(o=N(r,n))||o.enumerable});return e};var H=(e,r,t)=>(t=e!=null?G(K(e)):{},C(r||!e||!e.__esModule?p(t,"default",{value:e,enumerable:!0}):t,e)),Q=e=>C(p({},"__esModule",{value:!0}),e);var y=m((ue,F)=>{"use strict";var b=require("fs"),x;function U(){try{return b.statSync("/.dockerenv"),!0}catch{return!1}}function V(){try{return b.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}F.exports=()=>(x===void 0&&(x=U()||V()),x)});var k=m((le,P)=>{"use strict";var J=require("os"),Z=require("fs"),v=y(),O=()=>{if(process.platform!=="linux")return!1;if(J.release().toLowerCase().includes("microsoft"))return!v();try{return Z.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!v():!1}catch{return!1}};process.env.__IS_WSL_TEST__?P.exports=O:P.exports=O()});var $=m((fe,T)=>{"use strict";T.exports=(e,r,t)=>{let o=n=>Object.defineProperty(e,r,{value:n,enumerable:!0,writable:!0});return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){let n=t();return o(n),n},set(n){o(n)}}),e}});var B=m((pe,z)=>{var ee=require("path"),re=require("child_process"),{promises:g,constants:M}=require("fs"),d=k(),te=y(),E=$(),q=ee.join(__dirname,"xdg-open"),{platform:c,arch:W}=process,ne=()=>{try{return g.statSync("/run/.containerenv"),!0}catch{return!1}},A;function oe(){return A===void 0&&(A=ne()||te()),A}var se=(()=>{let e="/mnt/",r;return async function(){if(r)return r;let t="/etc/wsl.conf",o=!1;try{await g.access(t,M.F_OK),o=!0}catch{}if(!o)return e;let n=await g.readFile(t,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(n);return a?(r=a.groups.mountPoint.trim(),r=r.endsWith("/")?r:`${r}/`,r):e}})(),L=async(e,r)=>{let t;for(let o of e)try{return await r(o)}catch(n){t=n}throw t},h=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return L(e.app,i=>h({...e,app:i}));let{name:r,arguments:t=[]}=e.app||{};if(t=[...t],Array.isArray(r))return L(r,i=>h({...e,app:{name:i,arguments:t}}));let o,n=[],a={};if(c==="darwin")o="open",e.wait&&n.push("--wait-apps"),e.background&&n.push("--background"),e.newInstance&&n.push("--new"),r&&n.push("-a",r);else if(c==="win32"||d&&!oe()&&!r){let i=await se();o=d?`${i}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,n.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),d||(a.windowsVerbatimArguments=!0);let s=["Start"];e.wait&&s.push("-Wait"),r?(s.push(`"\`"${r}\`""`,"-ArgumentList"),e.target&&t.unshift(e.target)):e.target&&s.push(`"${e.target}"`),t.length>0&&(t=t.map(f=>`"\`"${f}\`""`),s.push(t.join(","))),e.target=Buffer.from(s.join(" "),"utf16le").toString("base64")}else{if(r)o=r;else{let i=!__dirname||__dirname==="/",s=!1;try{await g.access(q,M.X_OK),s=!0}catch{}o=process.versions.electron||c==="android"||i||!s?"xdg-open":q}t.length>0&&n.push(...t),e.wait||(a.stdio="ignore",a.detached=!0)}e.target&&n.push(e.target),c==="darwin"&&t.length>0&&n.push("--args",...t);let l=re.spawn(o,n,a);return e.wait?new Promise((i,s)=>{l.once("error",s),l.once("close",f=>{if(!e.allowNonzeroExitCode&&f>0){s(new Error(`Exited with code ${f}`));return}i(l)})}):(l.unref(),l)},S=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return h({...r,target:e})},ie=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:t=[]}=r||{};if(t!=null&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return h({...r,app:{name:e,arguments:t}})};function D(e){if(typeof e=="string"||Array.isArray(e))return e;let{[W]:r}=e;if(!r)throw new Error(`${W} is not supported`);return r}function _({[c]:e},{wsl:r}){if(r&&d)return D(r);if(!e)throw new Error(`${c} is not supported`);return D(e)}var w={};E(w,"chrome",()=>_({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));E(w,"firefox",()=>_({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));E(w,"edge",()=>_({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));S.apps=w;S.openApp=ie;z.exports=S});var ae={};Y(ae,{default:()=>X});module.exports=Q(ae);var u=require("@raycast/api"),I=H(B());async function X(e){let{fallbackText:r}=e,{number:t}=e.arguments,o=r||t;if(o==="")try{let n=await(0,u.getSelectedText)();n!==""&&(o=n)}catch(n){console.error(n)}if(o=o.replace(/[^0-9+]/g,"").trim(),o.length===0){await(0,u.showHUD)("You must enter a number before setting up a call");return}try{await(0,I.default)(`tel://${o}`),await(0,u.showHUD)(`Opening facetime calling ${o}...`)}catch(n){n instanceof Error&&await(0,u.showHUD)(n.message)}}
